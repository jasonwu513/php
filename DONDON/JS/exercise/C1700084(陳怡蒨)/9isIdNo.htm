<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>檢查身分證號碼</title>

</head>
<body>

身分證號碼檢查
<input type="text" id="IDNo">
<input type="button" value="檢查" onclick="isIdNo()">

<script>

function isIdNo(){

var str=document.getElementById("IDNo").value;
var letter;

if (str.length==10 && (str.charAt(1)==1 || str.charAt(1)==2)){//檢查字串長度和第二碼

	switch(str.charAt(0)){
		case 'A': case'a':letter='10';break;
		 case 'B': case'b':letter='11';break;
		  case 'C': case'c':letter='12';break;
		   case 'D': case'd':letter='13';break;
		    case 'E': case'e':letter='14';break;
		     case 'F': case'f':letter='15';break;
		      case 'G': case'g':letter='16';break;
		       case 'H': case'h':letter='17';break;

		case 'J': case'j':letter='18';break;
		 case 'K': case'k':letter='19';break;
		  case 'L': case'l':letter='20';break;
		   case 'M': case'm':letter='21';break;
		    case 'N': case'n':letter='22';break;

		case 'P': case'p':letter='23';break;
		 case 'Q': case'q':letter='24';break;
		  case 'R': case'r':letter='25';break;
		   case 'S': case's':letter='26';break;
		    case 'T': case't':letter='27';break;
		     case 'U': case'u':letter='28';break;
		      case 'V': case'v':letter='29';break;

		case 'X': case'x':letter='30';break;
		 case 'Y': case'y':letter='31';break;
		  case 'Z': case'z':letter='32';break;
	}//將第一碼轉為數值

	str=letter+str.substring(1);

	if (isNaN(str)!=true){
	//檢查第一碼是否為正確之英文字母，其餘碼是否為數字。
		var j=1;
		var sum=0;	//沒宣告為0，它就會告訴你不是數字，怪哉!不都做運算了嗎?這點比php笨?!

		for (var i=9;i>0;i--) {
			sum+=str[j]*i;
			j++;
		}

		var check=10-((str.charAt(0)*1+sum)%10);
		//算出檢查碼。

		if (check==str.charAt(10)){
			alert("輸入之身分證字號正確")
		}else{alert("檢查碼驗證不通過")};

	}else{alert("英文字母錯誤或格式有誤")};

}else{alert("長度或首位數字不正確")};

}

</script>
</body>
</html>