<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Fade in, Fade out(onclick) </title>
</head>
<body>
<center>
<input type="button" id="btnInOut" value="淡出"><br>

<img src="melon.gif" alt="小玉" id="img1" style="opacity:1"> 	
</center>
</body>
</html>                                         
<script>
	var opacity=1;
	var timerId;
	var timerdd;

	function showOpacity(){
	  var img1 = document.getElementById("img1");
	  opacity -= 0.05;
	  console.log( opacity );
	  img1.style.opacity = opacity;	
	  if( opacity <= 0 ){
	  	clearInterval( timerId );
	  	word();
  	 	document.getElementById("btnInOut").disabled=false;
	  }
	}
	function watch(){
		if( opacity >= 1 ){
			fadeOut();
		}else{
			fadein();
		}	
	}

	function inin(){
		var img1 = document.getElementById("img1");
	  opacity += 0.05;
	  img1.style.opacity = opacity;	
	  if( opacity >= 1 ){
	  	clearInterval( timerdd );
	  	document.getElementById("btnInOut").value = "淡出";
	  	document.getElementById("btnInOut").disabled=false;
	  }
	}

	function fadein(){
	  timerdd = setInterval( inin, 100 );
	  document.getElementById("btnInOut").disabled=true;
	}

	function fadeOut(){
	  timerId = setInterval( showOpacity, 100 );
	  document.getElementById("btnInOut").disabled=true;
	}
	function word(){
		document.getElementById("btnInOut").value = "淡入";
	}
	//點下去做淡入/淡出的切換
	function init(){
	  document.getElementById("btnInOut").onclick = watch;
	}

	window.onload = init;
</script>