<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<style type="text/css">
	*{
		font-size: 22px;
		font-family: 微軟正黑體;
	}
	table,th,td{
		border: 1px solid black;
		border-collapse: collapse;
		margin: auto;
	}
	th,td{
		padding: 15px;
		text-align: center;
	}
	th{
		color: #fff;
		text-shadow: 1px 1px #030;
		background-color: #5d5;
	}
	caption{
		color: #f33;
		margin: auto;
		padding: 15px;
	}
	caption > input[type=text]{
		width: 20%;
		margin: 0 1%;
		text-align: center;
	}
</style>
</head>
<body>

<table>
	<caption>
		西元<input type="text" id="whichYear">年
		<input type="text" id="whichMonth">月
	</caption>
	<thead>
		<tr>
			<th>日</th>
			<th>一</th>
			<th>二</th>
			<th>三</th>
			<th>四</th>
			<th>五</th>
			<th>六</th>			
		</tr>
	</thead>
	<tbody id="dataZone"></tbody>
</table>

<script type="text/javascript">

function getNumberOfDay(year, month){	
	var isLeap = (year%400 == 0 || (year%100 != 0 && year%4 == 0));

	//1月=Array[0],2月=Array[1]... = [month-1]
	return [31, (isLeap ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month-1];
}

function getCalData(year,month,day){	
	var printDay = 1; //日期
	var NumberOfDay = getNumberOfDay(year,month); //該月天數

	/*不是第一次生成,清除內容*/
	while(document.getElementById('dataZone').firstChild){
        document.getElementById('dataZone').removeChild(document.getElementById('dataZone').firstChild);
	}

	while(printDay <= NumberOfDay){

		var tableRow = document.createElement('tr');

		for(var j = 0 ; j <= 6 ; j++){ //每行印滿7格
			/*判斷第一天,getDay:日=0,一=1...*/
			if(printDay==1 && j<day){
				var tableData = document.createElement('td');
				tableRow.appendChild(tableData);
			}
			/*該月天數結束,格子還沒印完*/
			else if(printDay > NumberOfDay){
				var tableData = document.createElement('td');
				tableRow.appendChild(tableData);
			}
			else{
				var tableData = document.createElement('td');
				tableData.innerHTML = printDay++;
				tableRow.appendChild(tableData);
			}
		}

		document.getElementById('dataZone').appendChild(tableRow);

	}
}

function changeCalData(){
	var theYear = document.getElementById('whichYear').value;
	var theMonth = document.getElementById('whichMonth').value-1; //月份從0開始	
	var thefirstDay = new Date(theYear,theMonth,1);

	console.log(thefirstDay);
	getCalData(theYear,theMonth+1,thefirstDay.getDay());
}

function init(){
	var today = new Date();
	var thisMonthDay = new Date(today.getFullYear(),today.getMonth(),1);

	document.getElementById('whichYear').value = today.getFullYear();
	document.getElementById('whichMonth').value = today.getMonth()+1;

	console.log(thisMonthDay);
	getCalData(thisMonthDay.getFullYear(),thisMonthDay.getMonth()+1,thisMonthDay.getDay()); //月份從0開始

	/*改變年或月 -> 改變月曆內容*/
	document.getElementById('whichYear').onchange = changeCalData;
	document.getElementById('whichMonth').onchange = changeCalData;
}

window.onload = init;
</script>
    
</body>
</html>