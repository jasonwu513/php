<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>HW8</title>
<style type="text/css">
	#roll {
		display: block;
		width: 60px;
		margin: 20px auto;
		font-size: 20px;
	}
	.box {
		width: 90vw;
		max-width: 800px;
		height: calc(90vw);
		max-height: 800px;
		margin: auto;
		box-sizing: border-box;
		display: grid;
		grid-template-columns: 1fr 1fr 1fr 1fr;
		grid-gap: 10px;
		grid-template-rows: 1fr 1fr 1fr 1fr;
	}
	.box > .item {
		background-color: #ddd;
		font-size: 24px;
		font-family: sans-serif;
		text-align: center;
		padding-top: 40%;
		box-sizing: border-box;
		color: #e00;
		font-weight: bold;
	}
	.item:first-child {
	  grid-column: 1;
	  grid-row: 1;
	}
	.item:nth-child(2) {
	  grid-column: 2;
	  grid-row: 1;
	}
	.item:nth-child(3) {
	  grid-column: 3;
	  grid-row: 1;
	}
	.item:nth-child(4) {
	  grid-column: 4;
	  grid-row: 1;
	}
	.item:nth-child(5) {
	  grid-column: 4;
	  grid-row: 2;
	}
	.item:nth-child(6) {
	  grid-column: 4;
	  grid-row: 3;
	}
	.item:nth-child(7) {
	  grid-column: 4;
	  grid-row: 4;
	}
	.item:nth-child(8) {
	  grid-column: 3;
	  grid-row: 4;
	}
	.item:nth-child(9) {
	  grid-column: 2;
	  grid-row: 4;
	}
	.item:nth-child(10) {
	  grid-column: 1;
	  grid-row: 4;
	}
	.item:nth-child(11) {
	  grid-column: 1;
	  grid-row: 3;
	}
	.item:nth-child(12) {
	  grid-column: 1;
	  grid-row: 2;
	}
</style>
</head>
<body>

<button id="roll">搖獎</button>

<div class="box">
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
	<div class="item"></div>
</div>

<script type="text/javascript">
var timerId;
var count;
var current = 0;
var btn = document.getElementById("roll");
var item = document.getElementsByClassName("item");

function rand(min, max){
	return Math.round(Math.random()*(max-min)) + parseInt(min);
}

function goRoll(){
	btn.disabled=true;

	item[current].style.backgroundColor = "#ddd";
	current++;
	current %= 12;
	item[current].style.backgroundColor = "#ff0";
	count--;
	clearInterval(timerId);
	timerId = setInterval(goRoll,360-(count*10));
	
	if(count==0){
		//1000~10...0,以100為單位
		item[current].innerHTML = "$" + rand(10,100000)*100;
		clearInterval(timerId);
		btn.disabled=false;
	}

}

function Roller(){
	count = rand(18,36);
	item[current].innerHTML = ""; //清除上一輪金額
	timerId = setInterval(goRoll,360-(count*10));
}

function init(){
	btn.onclick = Roller;
}

window.onload = init;

</script>

</body>
</html>