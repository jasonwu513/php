<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<style type="text/css">
	table{
		margin: auto;
	}
	td{
		width: 100px;
		height: 100px;
		background-color: #ccc;
	}
	#mid{
		background-color: #fff;
	}
	h2,h3{
		text-align: center;
	}
</style>
<script type="text/javascript">
	var timerId;
	var number=0;
	var stop;
	var speed=100;

	function rand(min,max){
    	var small = parseInt(min);
    	var big = parseInt(max);
    	var randNum = Math.round( Math.random()*(big-small))+small;
    	return randNum;
    }

	function go(){
		/*reset*/	
		var tds = document.getElementsByTagName("td");
		for( var i=0; i<tds.length; i++){
			tds[i].style.backgroundColor="#ccc";
			tds[i].innerHTML="";
		}
		document.getElementById("mid").style.backgroundColor="white";
		/*main logic*/
		document.getElementById("btn").disabled=true;
		number++;
		
		document.getElementById("d"+(number%8)).style.backgroundColor="yellow";
		document.getElementById("d"+(number%8)).innerHTML=rand(1,100);
		clearInterval(timerId);
		if(number!=stop){
			speed+=20;
			timerId=setInterval(go,speed);
		}else{
			clearInterval(timerId);
			document.getElementById("btn").disabled=false;
			number=0;
			speed=100;
		}
	}

	function click(){
		timerId=setInterval(go,speed);
		stop=rand(10,30);/*跑的格數*/
		console.log("stop=",stop);
		document.getElementById("sp").innerHTML=stop;
	}

	function init(){
		document.getElementById("btn").onclick=click;
	}

	window.onload=init;
</script>
</head>
<body>
	<h2>跑的範圍 :1~20 格。</h2>
	<h3>跑<spna id="sp"></spna>格</h3>
    <table>
    <caption><input type="button" id="btn" value="抽獎"></caption>
    	<tr><td id="d0"></td><td id="d1"></td><td id="d2"></td></tr>
    	<tr><td id="d7"></td><td id="mid"></td><td id="d3"></td></tr>
    	<tr><td id="d6"></td><td id="d5"></td><td id="d4"></td></tr>
    </table>
</body>
</html>