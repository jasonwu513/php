<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>tama</title>
</head>
<body>
	<center>
	<input type="button" id="btnInOut" value="淡出"><br>
	<img src="melon.gif" alt="小玉" id="img1" style="opacity: 1">
	</center>

	<script type="text/javascript">
		var opacity=1;
		var timerId;

		function fadeOut(){
			opacity-=0.05;
			document.getElementById("img1").style.opacity=opacity;
			if(opacity<=0){
				clearInterval(timerId);
				document.getElementById("btnInOut").value="淡入";
				document.getElementById("btnInOut").disabled=false;
			}
		}

		function fadeIn(){
			opacity+=0.05;
			document.getElementById("img1").style.opacity=opacity;
			if(opacity>=1){
				clearInterval(timerId);
				document.getElementById("btnInOut").value="淡出";
				document.getElementById("btnInOut").disabled=false;
			}
		}

		function check(){
			if(opacity>=1){	//判斷進入fadeOOut或fadeIn
				timerId =setInterval(fadeOut,100);
			}else{
				timerId =setInterval(fadeIn,100);
			}
		}
		// function check(){
		// 	var btn=document.getElementById("btnInOut");
		// 	if(btn.value=="淡出"){
		// 		timerId = setInterval(fadeOut,100);
		// 		document.getElementById("btnInOut").disabled=true;
		// 	}else{
		// 		timerId = setInterval(fadeIn,100);
		// 		document.getElementById("btnInOut").disabled=true;
		// 	}
		// }

		function init(){
			document.getElementById("btnInOut").onclick = check;
		}	//一開始先進到check

		window.onload =init;
	</script>
</body>
</html>